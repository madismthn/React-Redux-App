import{h as ue,i as _e,j as Me,a as xe,_ as be,d as le,c as O,e as v,b as g,k as ge,g as qe}from"./@babel-CoX8lcXb.js";import{c as Ge}from"./classnames-C9FZUsQl.js";import{c as de,t as Te,B as Z,i as Je,h as Xe,s as Ye,E as Ze}from"./rc-util-BNe1t_Cc.js";import{r as o}from"./react-DHBI0EtI.js";var et=["children"],Ne=o.createContext({});function kt(e){var t=e.children,n=ue(e,et);return o.createElement(Ne.Provider,{value:n},t)}var tt=function(e){_e(n,e);var t=Me(n);function n(){return xe(this,n),t.apply(this,arguments)}return be(n,[{key:"render",value:function(){return this.props.children}}]),n}(o.Component),N="none",G="appear",J="enter",X="leave",Ce="none",R="prepare",Q="start",$="active",me="end",Oe="prepared";function ke(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}function nt(e,t){var n={animationend:ke("Animation","AnimationEnd"),transitionend:ke("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var rt=nt(de(),typeof window<"u"?window:{}),De={};if(de()){var at=document.createElement("div");De=at.style}var Y={};function Ue(e){if(Y[e])return Y[e];var t=rt[e];if(t)for(var n=Object.keys(t),r=n.length,a=0;a<r;a+=1){var u=n[a];if(Object.prototype.hasOwnProperty.call(t,u)&&u in De)return Y[e]=t[u],Y[e]}return""}var Ve=Ue("animationend"),we=Ue("transitionend"),Fe=!!(Ve&&we),Le=Ve||"animationend",Pe=we||"transitionend";function Re(e,t){if(!e)return null;if(le(e)==="object"){var n=t.replace(/-\w/g,function(r){return r[1].toUpperCase()});return e[n]}return"".concat(e,"-").concat(t)}const it=function(e){var t=o.useRef();function n(a){a&&(a.removeEventListener(Pe,e),a.removeEventListener(Le,e))}function r(a){t.current&&t.current!==a&&n(t.current),a&&a!==t.current&&(a.addEventListener(Pe,e),a.addEventListener(Le,e),t.current=a)}return o.useEffect(function(){return function(){n(t.current)}},[]),[r,n]};var je=de()?o.useLayoutEffect:o.useEffect;const ot=function(){var e=o.useRef(null);function t(){Te.cancel(e.current)}function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var u=Te(function(){a<=1?r({isCanceled:function(){return u!==e.current}}):n(r,a-1)});e.current=u}return o.useEffect(function(){return function(){t()}},[]),[n,t]};var ut=[R,Q,$,me],st=[R,Oe],Ke=!1,ct=!0;function Ie(e){return e===$||e===me}const vt=function(e,t,n){var r=Z(Ce),a=O(r,2),u=a[0],f=a[1],m=ot(),E=O(m,2),i=E[0],s=E[1];function c(){f(R,!0)}var l=t?st:ut;return je(function(){if(u!==Ce&&u!==me){var d=l.indexOf(u),S=l[d+1],k=n(u);k===Ke?f(S,!0):S&&i(function(_){function T(){_.isCanceled()||f(S,!0)}k===!0?T():Promise.resolve(k).then(T)})}},[e,u]),o.useEffect(function(){return function(){s()}},[]),[c,u]};function ft(e,t,n,r){var a=r.motionEnter,u=a===void 0?!0:a,f=r.motionAppear,m=f===void 0?!0:f,E=r.motionLeave,i=E===void 0?!0:E,s=r.motionDeadline,c=r.motionLeaveImmediately,l=r.onAppearPrepare,d=r.onEnterPrepare,S=r.onLeavePrepare,k=r.onAppearStart,_=r.onEnterStart,T=r.onLeaveStart,D=r.onAppearActive,U=r.onEnterActive,b=r.onLeaveActive,V=r.onAppearEnd,L=r.onEnterEnd,C=r.onLeaveEnd,x=r.onVisibleChanged,ee=Z(),I=O(ee,2),P=I[0],w=I[1],h=Z(N),F=O(h,2),p=F[0],j=F[1],te=Z(null),H=O(te,2),W=H[0],pe=H[1],ne=o.useRef(!1),re=o.useRef(null);function B(){return n()}var Ee=o.useRef(!1);function Se(){j(N,!0),pe(null,!0)}var ye=Je(function(A){if(p!==N){var y=B();if(!(A&&!A.deadline&&A.target!==y)){var M=Ee.current,q;p===G&&M?q=V==null?void 0:V(y,A):p===J&&M?q=L==null?void 0:L(y,A):p===X&&M&&(q=C==null?void 0:C(y,A)),M&&q!==!1&&Se()}}}),Qe=it(ye),$e=O(Qe,1),We=$e[0],he=function(y){switch(y){case G:return g(g(g({},R,l),Q,k),$,D);case J:return g(g(g({},R,d),Q,_),$,U);case X:return g(g(g({},R,S),Q,T),$,b);default:return{}}},z=o.useMemo(function(){return he(p)},[p]),ze=vt(p,!e,function(A){if(A===R){var y=z[R];return y?y(B()):Ke}if(K in z){var M;pe(((M=z[K])===null||M===void 0?void 0:M.call(z,B(),null))||null)}return K===$&&p!==N&&(We(B()),s>0&&(clearTimeout(re.current),re.current=setTimeout(function(){ye({deadline:!0})},s))),K===Oe&&Se(),ct}),Ae=O(ze,2),He=Ae[0],K=Ae[1],Be=Ie(K);Ee.current=Be,je(function(){w(t);var A=ne.current;ne.current=!0;var y;!A&&t&&m&&(y=G),A&&t&&u&&(y=J),(A&&!t&&i||!A&&c&&!t&&i)&&(y=X);var M=he(y);y&&(e||M[R])?(j(y),He()):j(N)},[t]),o.useEffect(function(){(p===G&&!m||p===J&&!u||p===X&&!i)&&j(N)},[m,u,i]),o.useEffect(function(){return function(){ne.current=!1,clearTimeout(re.current)}},[]);var ae=o.useRef(!1);o.useEffect(function(){P&&(ae.current=!0),P!==void 0&&p===N&&((ae.current||P)&&(x==null||x(P)),ae.current=!0)},[P,p]);var ie=W;return z[R]&&K===Q&&(ie=v({transition:"none"},ie)),[p,K,ie,P??t]}function lt(e){var t=e;le(e)==="object"&&(t=e.transitionSupport);function n(a,u){return!!(a.motionName&&t&&u!==!1)}var r=o.forwardRef(function(a,u){var f=a.visible,m=f===void 0?!0:f,E=a.removeOnLeave,i=E===void 0?!0:E,s=a.forceRender,c=a.children,l=a.motionName,d=a.leavedClassName,S=a.eventProps,k=o.useContext(Ne),_=k.motion,T=n(a,_),D=o.useRef(),U=o.useRef();function b(){try{return D.current instanceof HTMLElement?D.current:Ze(U.current)}catch{return null}}var V=ft(T,m,b,a),L=O(V,4),C=L[0],x=L[1],ee=L[2],I=L[3],P=o.useRef(I);I&&(P.current=!0);var w=o.useCallback(function(W){D.current=W,Xe(u,W)},[u]),h,F=v(v({},S),{},{visible:m});if(!c)h=null;else if(C===N)I?h=c(v({},F),w):!i&&P.current&&d?h=c(v(v({},F),{},{className:d}),w):s||!i&&!d?h=c(v(v({},F),{},{style:{display:"none"}}),w):h=null;else{var p;x===R?p="prepare":Ie(x)?p="active":x===Q&&(p="start");var j=Re(l,"".concat(C,"-").concat(p));h=c(v(v({},F),{},{className:Ge(Re(l,C),g(g({},j,j&&p),l,typeof l=="string")),style:ee}),w)}if(o.isValidElement(h)&&Ye(h)){var te=h,H=te.ref;H||(h=o.cloneElement(h,{ref:w}))}return o.createElement(tt,{ref:U},h)});return r.displayName="CSSMotion",r}const dt=lt(Fe);var se="add",ce="keep",ve="remove",oe="removed";function mt(e){var t;return e&&le(e)==="object"&&"key"in e?t=e:t={key:e},v(v({},t),{},{key:String(t.key)})}function fe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(mt)}function pt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,a=t.length,u=fe(e),f=fe(t);u.forEach(function(i){for(var s=!1,c=r;c<a;c+=1){var l=f[c];if(l.key===i.key){r<c&&(n=n.concat(f.slice(r,c).map(function(d){return v(v({},d),{},{status:se})})),r=c),n.push(v(v({},l),{},{status:ce})),r+=1,s=!0;break}}s||n.push(v(v({},i),{},{status:ve}))}),r<a&&(n=n.concat(f.slice(r).map(function(i){return v(v({},i),{},{status:se})})));var m={};n.forEach(function(i){var s=i.key;m[s]=(m[s]||0)+1});var E=Object.keys(m).filter(function(i){return m[i]>1});return E.forEach(function(i){n=n.filter(function(s){var c=s.key,l=s.status;return c!==i||l!==ve}),n.forEach(function(s){s.key===i&&(s.status=ce)})}),n}var Et=["component","children","onVisibleChanged","onAllRemoved"],St=["status"],yt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ht(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt,n=function(r){_e(u,r);var a=Me(u);function u(){var f;xe(this,u);for(var m=arguments.length,E=new Array(m),i=0;i<m;i++)E[i]=arguments[i];return f=a.call.apply(a,[this].concat(E)),g(ge(f),"state",{keyEntities:[]}),g(ge(f),"removeKey",function(s){var c=f.state.keyEntities,l=c.map(function(d){return d.key!==s?d:v(v({},d),{},{status:oe})});return f.setState({keyEntities:l}),l.filter(function(d){var S=d.status;return S!==oe}).length}),f}return be(u,[{key:"render",value:function(){var m=this,E=this.state.keyEntities,i=this.props,s=i.component,c=i.children,l=i.onVisibleChanged,d=i.onAllRemoved,S=ue(i,Et),k=s||o.Fragment,_={};return yt.forEach(function(T){_[T]=S[T],delete S[T]}),delete S.keys,o.createElement(k,S,E.map(function(T,D){var U=T.status,b=ue(T,St),V=U===se||U===ce;return o.createElement(t,qe({},_,{key:b.key,visible:V,eventProps:b,onVisibleChanged:function(C){if(l==null||l(C,{key:b.key}),!C){var x=m.removeKey(b.key);x===0&&d&&d()}}}),function(L,C){return c(v(v({},L),{},{index:D}),C)})}))}}],[{key:"getDerivedStateFromProps",value:function(m,E){var i=m.keys,s=E.keyEntities,c=fe(i),l=pt(s,c);return{keyEntities:l.filter(function(d){var S=s.find(function(k){var _=k.key;return d.key===_});return!(S&&S.status===oe&&d.status===ve)})}}}]),u}(o.Component);return g(n,"defaultProps",{component:"div"}),n}const Lt=ht(Fe);export{dt as C,kt as M,Lt as a};
