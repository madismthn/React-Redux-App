import{j as e,r as m,a as M}from"./react-DHBI0EtI.js";import{r as A,c as B}from"./react-dom-DvAqprxs.js";import{u as v,a as h,P as O}from"./react-redux-DRBJJprV.js";import{N as f,B as H}from"./react-router-dom-CtAS27Tq.js";import{c as y,a as G,b as U}from"./@reduxjs-DgYfEjhV.js";import{F as u,I as _,B as V}from"./antd-BEFohwd5.js";import{p as z}from"./styled-components-Cbb8Q2t_.js";import{e as J,f as W,g}from"./react-router-CSEUt_bw.js";import"./classnames-C9FZUsQl.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-BtHkT4fs.js";import"./@remix-run-BMxHpxh-.js";import"./redux-DITMfSWq.js";import"./immer-AZmEbvJU.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./rc-util-BNe1t_Cc.js";import"./@babel-CoX8lcXb.js";import"./@ant-design-DmA6Yaqe.js";import"./@emotion-CW87jbl0.js";import"./stylis-DS72D9tC.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@ctrl-DOFZgDuz.js";import"./rc-resize-observer-Dua0P25Q.js";import"./rc-motion-B0FP2ndV.js";import"./rc-input-BnAb7LYK.js";import"./rc-textarea-Ex3N2bzw.js";import"./rc-field-form-CA5aLgPq.js";import"./@rc-component-tfM_EwG3.js";import"./rc-pagination-CzlgB91X.js";import"./rc-picker-DfAky8Tw.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-tooltip-gVUf-CcS.js";import"./tslib-CGNu0TuM.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const Z="_navigation_19iuf_1",K={navigation:Z};function Q(){return e.jsxs("nav",{className:K.navigation,children:[e.jsx(f,{to:"/",children:"Home"}),e.jsx(f,{to:"/about",children:"About"}),e.jsx(f,{to:"/contact",children:"Contact"}),e.jsx(f,{to:"/posts",children:"Posts"})]})}const X="_title_1dz7s_1",Y="_content_1dz7s_5",d={title:X,content:Y};function ee(){return e.jsxs("div",{className:"home",children:[e.jsx("h1",{className:d.title,children:"Home"}),e.jsx("div",{className:d.content,children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt expedita quo cum tempora magnam libero assumenda aperiam dolorem, non nisi laborum placeat culpa itaque architecto doloremque inventore quae veritatis error!"})]})}const P="https://66082afaa2a5dd477b14181d.mockapi.io/posts",te={list:[],loading:!1,error:null},k=y("posts/getPosts",async()=>{const s=await fetch(`${P}/posts`);if(!s.ok)throw"Ошибка при получении постов";return await s.json()}),C=y("posts/deletePost",async s=>{const t=await fetch(`${P}/posts/${s}`,{method:"DELETE"});if(!t.ok)throw"Ошибка при удалении поста";return await t.json()}),N=y("posts/addNewPost",async s=>{const t=await fetch(`${P}/posts`,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});if(!t.ok)throw"Ошибка при создании поста";return await t.json()}),b=y("posts/editPost",async s=>{const t=await fetch(`${P}/posts/${s.id}`,{method:"PUT",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});if(!t.ok)throw"Ошибка при редактировании поста";return await t.json()}),w=y("posts/likePost",async s=>{const t={...s,liked:!s.liked},o=await fetch(`${P}/posts/${t.id}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!o.ok)throw"Ошибка при редактировании поста";return await o.json()}),F=G({name:"posts",initialState:te,reducers:{setPosts:(s,t)=>{s.list=t.payload}},extraReducers:s=>{s.addCase(k.pending,t=>{t.loading=!0}),s.addCase(k.fulfilled,(t,o)=>{t.list=o.payload,t.loading=!1,t.error=null}),s.addCase(k.rejected,(t,o)=>{t.loading=!1,t.error=o.error}),s.addCase(C.pending,t=>{t.loading=!0}),s.addCase(C.fulfilled,(t,o)=>{const n=o.payload.id;t.list=t.list.filter(r=>r.id!==n),t.loading=!1,t.error=null}),s.addCase(C.rejected,(t,o)=>{t.loading=!1,t.error=o.error}),s.addCase(N.pending,t=>{t.loading=!0}),s.addCase(N.fulfilled,(t,o)=>{t.list.push(o.payload),t.loading=!1,t.error=null}),s.addCase(N.rejected,(t,o)=>{t.loading=!1,t.error=o.error}),s.addCase(b.pending,t=>{t.loading=!0}),s.addCase(b.fulfilled,(t,o)=>{const n=o.payload;t.list=t.list.map(r=>r.id===n.id?n:r),t.loading=!1,t.error=null}),s.addCase(b.rejected,(t,o)=>{t.loading=!1,t.error=o.error}),s.addCase(w.pending,t=>{t.loading=!0}),s.addCase(w.fulfilled,(t,o)=>{const n=o.payload;t.list=t.list.map(r=>r.id===n.id?n:r),t.loading=!1,t.error=null}),s.addCase(w.rejected,(t,o)=>{t.loading=!1,t.error=o.error})}});F.actions;const se=F.reducer,oe="_button_1s7e9_1",re={button:oe},c=({children:s,onClick:t})=>e.jsx("button",{className:re.button,onClick:t,children:s}),I="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12%206.00019C10.2006%203.90317%207.19377%203.2551%204.93923%205.17534C2.68468%207.09558%202.36727%2010.3061%204.13778%2012.5772C5.60984%2014.4654%2010.0648%2018.4479%2011.5249%2019.7369C11.6882%2019.8811%2011.7699%2019.9532%2011.8652%2019.9815C11.9483%2020.0062%2012.0393%2020.0062%2012.1225%2019.9815C12.2178%2019.9532%2012.2994%2019.8811%2012.4628%2019.7369C13.9229%2018.4479%2018.3778%2014.4654%2019.8499%2012.5772C21.6204%2010.3061%2021.3417%207.07538%2019.0484%205.17534C16.7551%203.2753%2013.7994%203.90317%2012%206.00019Z'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",T="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='%23ed143d'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12%206.00019C10.2006%203.90317%207.19377%203.2551%204.93923%205.17534C2.68468%207.09558%202.36727%2010.3061%204.13778%2012.5772C5.60984%2014.4654%2010.0648%2018.4479%2011.5249%2019.7369C11.6882%2019.8811%2011.7699%2019.9532%2011.8652%2019.9815C11.9483%2020.0062%2012.0393%2020.0062%2012.1225%2019.9815C12.2178%2019.9532%2012.2994%2019.8811%2012.4628%2019.7369C13.9229%2018.4479%2018.3778%2014.4654%2019.8499%2012.5772C21.6204%2010.3061%2021.3417%207.07538%2019.0484%205.17534C16.7551%203.2753%2013.7994%203.90317%2012%206.00019Z'%20stroke='%23ed143d'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function ne({className:s,post:t,index:o,onClick:n,buttonsClassName:r}){const a=v(),l=x=>{a(C(x))},j=x=>{a(w(x))};return e.jsxs("div",{className:s,children:[e.jsxs("h3",{children:[e.jsxs("span",{children:[o+1,"."]}),e.jsx("span",{children:t.title})]}),e.jsx("div",{children:t.description}),e.jsxs("div",{className:r,children:[e.jsxs(c,{onClick:()=>j(t),children:[t.liked&&e.jsx("img",{width:"20px",className:"heart",src:T,alt:"Heart"}),!t.liked&&e.jsx("img",{width:"20px",className:"heart",src:I,alt:"Heart"})]}),e.jsx(c,{onClick:()=>l(t.id),children:"Delete"}),e.jsx(c,{onClick:n,children:"Edit"})]})]},t.id)}const $={labelCol:{span:8},wrapperCol:{span:16}},ie={required:"${label} is required!"},R=({selectedPost:s})=>{const t=v(),o=h(r=>r.posts.loading),n=r=>{t(b({...s,title:r.title,description:r.description}))};return e.jsxs(u,{...$,name:"nest-messages",onFinish:n,initialValues:{title:s.title,description:s.description},style:{maxWidth:600},validateMessages:ie,children:[e.jsx(u.Item,{name:"title",label:"Title",rules:[{required:!0}],children:e.jsx(_,{})}),e.jsx(u.Item,{name:"description",label:"Description",rules:[{required:!0}],children:e.jsx(_.TextArea,{})}),e.jsx(u.Item,{wrapperCol:{...$.wrapperCol,offset:8},children:e.jsx(V,{loading:o,type:"primary",htmlType:"submit",children:"Save"})})]})},ae=z.dialog`
  width: 400px;
  margin 10rem, auto;
  padding: 1rem;
  border: 1px solid #ccc;
  border-radius: 10px;
  z-index: 100;
`;function S({children:s,open:t}){const o=m.useRef();return m.useEffect(()=>{t?o.current.showModal():o.current.close()},[t]),A.createPortal(e.jsx(ae,{ref:o,children:s}),document.getElementById("modal"))}const E={labelCol:{span:8},wrapperCol:{span:16}},le={required:"${label} is required!"},ce=()=>{const s=v(),[t,o]=m.useState(!1),n=()=>{o(!0)},r=h(l=>l.posts.loading),a=({post:l})=>{s(N({title:l.title,description:l.description,liked:!1,thumbnail:"https://loremflickr.com/640/480/people"}))};return e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:()=>n(),children:"Add new post"}),e.jsxs(S,{open:t,children:[e.jsxs(u,{...E,name:"nest-messages",onFinish:a,style:{maxWidth:600},validateMessages:le,children:[e.jsx(u.Item,{name:["post","title"],label:"Title",rules:[{required:!0}],children:e.jsx(_,{})}),e.jsx(u.Item,{name:["post","description"],label:"Description",rules:[{required:!0}],children:e.jsx(_.TextArea,{})}),e.jsx(u.Item,{wrapperCol:{...E.wrapperCol,offset:8},children:e.jsx(c,{loading:r,type:"primary",htmlType:"submit",onClick:()=>o(!1),children:"Create a new post"})})]}),e.jsx(c,{onClick:()=>o(!1),children:"Close add form"})]})]})},de="_post_1agui_1",pe="_buttons_1agui_19",L={post:de,buttons:pe},me=()=>{const s=v(),t=h(i=>i.posts.list),o=h(i=>i.posts.loading),n=h(i=>i.posts.error),[r,a]=m.useState(null),[l,j]=m.useState(!1);m.useEffect(()=>{s(k())},[s]);const x=i=>{a(i),j(!0)};return n?e.jsx("h2",{children:n.message}):o===!1&&t.length===0?e.jsx("h1",{children:"No data"}):e.jsxs("div",{className:"posts",children:[e.jsx("h1",{className:d.title,children:"Posts"}),e.jsxs("div",{className:d.content,children:[e.jsx(ce,{}),r!==null&&e.jsxs(S,{open:l,children:[e.jsx(R,{selectedPost:r}),e.jsx(c,{onClick:()=>j(!1),children:"Close Edit Form"})]}),t.map((i,p)=>e.jsxs(m.Fragment,{children:[e.jsx(ne,{className:L.post,buttonsClassName:L.buttons,index:p,post:i,onClick:()=>x(i)},i.id),e.jsx(f,{to:`/posts/${i.id}`,children:e.jsx(c,{children:"Read more"})})]},i.id))]})]})},ue="_post_1gj9y_1",he="_title_1gj9y_8",xe="_buttons_1gj9y_12",q={post:ue,title:he,buttons:xe},je=()=>{const s=v(),[t,o]=m.useState(null),[n,r]=m.useState(!1),a=p=>{s(C(p))},l=p=>{s(w(p))},j=p=>{o(p),r(!0)},{postId:x}=J(),i=h(p=>p.posts.list.find(D=>D.id===x));return i?e.jsxs("div",{className:q.post,children:[t!==null&&e.jsxs(S,{open:n,children:[e.jsx(R,{selectedPost:t}),e.jsx(c,{onClick:()=>r(!1),children:"Close Edit Form"})]}),e.jsx("h1",{className:d.title,children:i.title}),e.jsx("p",{className:d.content,children:i.foolDescription}),e.jsxs("div",{className:q.buttons,children:[e.jsxs(c,{onClick:()=>l(i),children:[i.liked&&e.jsx("img",{width:"20px",className:"heart",src:T,alt:"Heart"}),!i.liked&&e.jsx("img",{width:"20px",className:"heart",src:I,alt:"Heart"})]}),e.jsx(c,{onClick:()=>a(i.id),children:"Delete"}),e.jsx(c,{onClick:()=>j(i),children:"Edit"})]}),e.jsx(f,{to:"/posts",children:"Back to posts"})]}):e.jsx("h2",{children:"Post not found"})};function fe(){return e.jsxs("div",{className:"about",children:[e.jsx("h1",{className:d.title,children:"About"}),e.jsx("div",{className:d.content,children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt expedita quo cum tempora magnam libero assumenda aperiam dolorem, non nisi laborum placeat culpa itaque architecto doloremque inventore quae veritatis error!"})]})}const ge="_contactList_1kgo8_1",Ce={contactList:ge};function we(){return e.jsxs("div",{className:"contact",children:[e.jsx("h1",{className:d.title,children:"Contact"}),e.jsx("div",{className:d.content,children:e.jsxs("ul",{className:Ce.contactList,children:[e.jsxs("li",{children:[e.jsx("h3",{children:"Phone number"}),e.jsx("div",{children:"8 988 999 88 99"})]}),e.jsxs("li",{children:[e.jsx("h3",{children:"Email"}),e.jsx("div",{children:"pochta@mail.ru"})]}),e.jsxs("li",{children:[e.jsx("h3",{children:"Address"}),e.jsx("div",{children:"Street 1"})]})]})})]})}function ve(){const s=h(n=>n.posts.list),o=h(n=>n.posts.loading)&&s.length===0;return e.jsxs(e.Fragment,{children:[o&&e.jsx("h1",{children:"Loading..."}),!o&&e.jsx(e.Fragment,{children:e.jsxs(H,{children:[e.jsx(Q,{}),e.jsxs(W,{children:[e.jsx(g,{path:"/",element:e.jsx(ee,{})}),e.jsx(g,{path:"/about",element:e.jsx(fe,{})}),e.jsx(g,{path:"/contact",element:e.jsx(we,{})}),e.jsx(g,{path:"/posts/:postId",element:e.jsx(je,{})}),e.jsx(g,{path:"/posts",element:e.jsx(me,{})})]})]})})]})}const ye=U({reducer:{posts:se}});B.createRoot(document.getElementById("root")).render(e.jsx(M.StrictMode,{children:e.jsx(O,{store:ye,children:e.jsx(ve,{})})}));
